<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3D Pac-Man</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- UI Panel -->
  <div id="ui-panel">
    <button id="edit-level-btn">Edit Level</button>
    <button id="view-levels-btn">View Levels</button>
    <button id="pause-btn">Pause</button>
    <!-- New Settings Button -->
    <button id="settings-btn">
      <img src="Untitled5_20250220131615.png" alt="Settings" style="width: 24px; height: 24px;">
    </button>
  </div>

  <!-- Level Editor Modal -->
  <div id="level-editor" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Level Editor</h2>
      <div class="editor-modes">
        <button id="wall-mode-btn" class="editor-mode-btn active">Walls</button>
        <button id="pellet-mode-btn" class="editor-mode-btn">Pellets</button>
        <button id="power-pellet-mode-btn" class="editor-mode-btn">Power Pellets</button>
        <!-- New Ghost Mode Button -->
        <button id="ghost-mode-btn" class="editor-mode-btn">Ghosts</button>
        <!-- New Eraser Mode Button -->
        <button id="eraser-mode-btn" class="editor-mode-btn">Eraser</button>
      </div>
      <!-- New Line Mode Button -->
      <button id="line-mode-btn" class="editor-mode-btn">Draw Lines</button>
      <div id="grid-container"></div>
      <div class="modal-buttons">
        <div>
          <label for="maze-width">Width:</label>
          <input type="number" id="maze-width" value="10" min="5" max="30">
          <label for="maze-height">Height:</label>
          <input type="number" id="maze-height" value="8" min="5" max="30">
          <button id="resize-maze-btn">Resize Maze</button>
        </div>
        <button id="clear-maze-btn">Clear Maze</button>
        <button id="play-level-btn">Play Level</button>
        <button id="save-level-btn">Save Level</button>
        <button id="share-level-editor-btn">Share Level</button>
        <button id="cancel-editor-btn">Cancel</button>
      </div>
      <div id="share-link-editor" class="share-link"></div>
      <div id="share-level-editor-named" class="share-level" style="display: none;">
        <h3>Share Your Level</h3>
        <input type="text" id="level-name-editor" placeholder="Level Name">
        <input type="text" id="level-author-editor" placeholder="Your Name">
        <button id="confirm-share-editor-btn">Confirm Share</button>
      </div>
    </div>
  </div>

  <!-- View Levels Modal -->
  <div id="view-levels" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>View Levels</h2>
      <div class="level-tabs">
        <button class="tab-button active" data-tab="sample-levels">Sample Levels</button>
        <button class="tab-button" data-tab="custom-levels">Custom Levels</button>
      </div>
      <div id="sample-levels" class="level-tab-content">
        <div id="levels-list-sample"></div>
      </div>
      <div id="custom-levels" class="level-tab-content" style="display: none;">
        <div id="levels-list-custom"></div>
      </div>
      <div class="modal-buttons">
        <button id="close-levels-btn">Close</button>
      </div>
    </div>
  </div>

  <!-- Level Complete / Win Screen Modal -->
  <div id="level-complete" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Level Complete!</h2>
      <div class="modal-buttons">
        <button id="play-again-btn">Play Again</button>
        <button id="share-level-btn">Share Level</button>
        <button id="back-to-levels-btn">Back to Levels</button>
      </div>
      <div id="share-link" class="share-link"></div>
      <div id="share-level-complete-named" class="share-level" style="display: none;">
        <h3>Share Your Level</h3>
        <input type="text" id="level-name-complete" placeholder="Level Name">
        <input type="text" id="level-author-complete" placeholder="Your Name">
        <button id="confirm-share-complete-btn">Confirm Share</button>
      </div>
    </div>
  </div>

  <!-- Pause Menu Modal -->
  <div id="pause-menu" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Game Paused</h2>
      <div class="modal-buttons">
        <button id="resume-btn">Resume</button>
        <button id="restart-pause-btn">Restart Level</button>
        <button id="quit-pause-btn">Quit Game</button>
      </div>
    </div>
  </div>

  <!-- Death Screen Modal (for custom levels) -->
  <div id="death-screen" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>You Died!</h2>
      <div class="modal-buttons">
        <button id="restart-death-btn">Restart</button>
        <button id="goback-death-btn">Go Back</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-menu" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Settings</h2>
      <div class="settings-options">
        <div class="setting-item">
          <label for="volume-slider">Volume</label>
          <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
        </div>
        <!-- New "No Reset" Setting -->
        <div class="setting-item">
          <label for="no-reset-checkbox">No Reset</label>
          <input type="checkbox" id="no-reset-checkbox">
        </div>
        <!-- Fullscreen Setting -->
        <div class="setting-item">
          <label for="fullscreen-checkbox">Fullscreen</label>
          <input type="checkbox" id="fullscreen-checkbox">
        </div>
        <!-- New "Tetris is better" Setting -->
        <div class="setting-item">
          <span id="tetris-setting" style="cursor: pointer;">Tetris is better</span>
        </div>
        <!-- New Multiplayer Setting -->
        <div class="setting-item">
          <label for="multiplayer-checkbox">Multiplayer</label>
          <input type="checkbox" id="multiplayer-checkbox">
        </div>
        <!-- NEW: Bluetooth Controller Setting -->
        <div class="setting-item">
          <button id="connect-controller-btn">Connect Bluetooth Controller</button>
        </div>
      </div>
      <div class="modal-buttons">
        <button id="close-settings-btn">Close</button>
      </div>
    </div>
  </div>

  <!-- Not Working Screen Modal -->
  <div id="not-working-screen" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Doesnt Work :(</h2>
      <div class="modal-buttons">
        <button id="back-from-not-working-btn">Back</button>
      </div>
    </div>
  </div>

  <!-- Ensure this ghost context menu block is present (only used in editor mode) -->
  <div id="ghost-context-menu" class="context-menu" style="display: none;">
    <div class="context-menu-option" id="change-ghost-color">Change Color</div>
    <div class="context-menu-option" id="delete-ghost">Delete</div>
  </div>

  <!-- Video Modal -->
  <div id="video-modal" class="modal" style="display: none;">
    <div class="modal-content" style="background: black; width: 100%; height: 100%;">
      <video id="intermission-video" width="100%" height="100%" controls muted autoplay style="object-fit: contain;"></video>
    </div>
  </div>

  <!-- The game will render in this container -->
  <div id="game-container"></div>
  <script type="module" src="script.js"></script>
</body>

</html>